{"ast":null,"code":"var _jsxFileName = \"/Users/kevin/Documents/develop/Web/RentalCal/client/src/pages/OverviewCalendar.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { Calendar, momentLocalizer } from 'react-big-calendar';\nimport moment from 'moment';\nimport axios from 'axios';\nimport { Button, Modal, Form, Table } from 'react-bootstrap';\nimport 'react-big-calendar/lib/css/react-big-calendar.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst localizer = momentLocalizer(moment);\n\n// Egendefinert årsvisning (rendrer 12 måneder i et rutenett)\nconst YearView = ({\n  date,\n  localizer,\n  events\n}) => {\n  const months = Array.from({\n    length: 12\n  }, (_, i) => moment(date).month(i));\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"rbc-year-view\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"rbc-year-grid\",\n      children: months.map((month, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"rbc-year-month\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: month.format('MMMM YYYY')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 18,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"rbc-month-view\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"rbc-month-header\",\n            children: moment.weekdaysShort().map((day, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"rbc-header\",\n              children: day\n            }, i, false, {\n              fileName: _jsxFileName,\n              lineNumber: 22,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 20,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"rbc-month-body\",\n            children: (() => {\n              const startOfMonth = month.clone().startOf('month');\n              const endOfMonth = month.clone().endOf('month');\n              const startOfWeek = startOfMonth.clone().startOf('week');\n              const weeks = [];\n              let current = startOfWeek.clone();\n              while (current.isSameOrBefore(endOfMonth, 'day')) {\n                const weekDays = [];\n                for (let i = 0; i < 7; i++) {\n                  const dayEvents = events.filter(event => moment(event.start).isSame(current, 'day'));\n                  weekDays.push(/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: `rbc-day-bg ${current.isSame(moment(), 'day') ? 'rbc-today' : ''} ${!current.isSame(month, 'month') ? 'rbc-off-range' : ''}`,\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"rbc-date\",\n                      children: current.date()\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 43,\n                      columnNumber: 27\n                    }, this), dayEvents.map(event => /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"rbc-event\",\n                      children: event.title\n                    }, event.id, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 45,\n                      columnNumber: 29\n                    }, this))]\n                  }, current.format('YYYY-MM-DD'), true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 39,\n                    columnNumber: 25\n                  }, this));\n                  current.add(1, 'day');\n                }\n                weeks.push(/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"rbc-month-row\",\n                  children: weekDays\n                }, current.format('YYYY-WW'), false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 53,\n                  columnNumber: 32\n                }, this));\n              }\n              return weeks;\n            })()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 25,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 19,\n          columnNumber: 13\n        }, this)]\n      }, index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 17,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 15,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 14,\n    columnNumber: 5\n  }, this);\n};\n_c = YearView;\nfunction OverviewCalendar() {\n  _s();\n  const [rentals, setRentals] = useState([]);\n  const [products, setProducts] = useState([]);\n  const [selectedRental, setSelectedRental] = useState(null);\n  const [editRental, setEditRental] = useState({\n    project_number: '',\n    product_ids: [],\n    start_date: '',\n    end_date: ''\n  });\n  const [newRental, setNewRental] = useState({\n    project_number: '',\n    product_ids: [],\n    start_date: '',\n    end_date: ''\n  });\n  const [showAddModal, setShowAddModal] = useState(false);\n  const [currentDate, setCurrentDate] = useState(new Date('2025-05-23'));\n  const [currentView, setCurrentView] = useState('month');\n  const [statistics, setStatistics] = useState([]);\n  useEffect(() => {\n    fetchRentals();\n    fetchProducts();\n    updateStatistics();\n  }, [currentDate, currentView]);\n  const fetchRentals = () => {\n    axios.get('http://localhost:5000/api/rentals').then(res => {\n      console.log('All rentals:', res.data);\n      const formattedRentals = res.data.map(rental => {\n        const start = moment(rental.start_date, 'YYYY-MM-DD', true);\n        const end = moment(rental.end_date, 'YYYY-MM-DD', true);\n        console.log(`Rental ${rental.id}:`, {\n          start: start.isValid() ? start.toDate() : null,\n          end: end.isValid() ? end.toDate() : null,\n          valid: start.isValid() && end.isValid()\n        });\n        return {\n          id: rental.id,\n          title: `${rental.project_number}: ${rental.product_names}`,\n          start: start.isValid() ? start.toDate() : null,\n          end: end.isValid() ? end.toDate() : null\n        };\n      }).filter(rental => rental.start && rental.end);\n      setRentals(formattedRentals);\n    }).catch(err => {\n      console.error('Error fetching rentals:', err);\n      alert('Kunne ikke hente utleie: ' + err.message);\n    });\n  };\n  const fetchProducts = () => {\n    axios.get('http://localhost:5000/api/products').then(res => {\n      console.log('Products fetched:', res.data);\n      setProducts(res.data);\n    }).catch(err => {\n      console.error('Error fetching products:', err);\n      alert('Kunne ikke hente produkter: ' + err.message);\n    });\n  };\n  const addRental = () => {\n    if (!newRental.project_number || newRental.product_ids.length === 0) {\n      alert('Prosjektnummer og minst ett produkt kreves');\n      return;\n    }\n    axios.post('http://localhost:5000/api/rentals', newRental).then(res => {\n      console.log('Rental added:', res.data);\n      fetchRentals();\n      updateStatistics();\n      setNewRental({\n        project_number: '',\n        product_ids: [],\n        start_date: '',\n        end_date: ''\n      });\n      setShowAddModal(false);\n    }).catch(err => {\n      var _err$response, _err$response$data;\n      console.error('Error adding rental:', err);\n      alert(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.error) || 'Kunne ikke legge til utleie');\n    });\n  };\n  const handleSelectEvent = event => {\n    axios.get(`http://localhost:5000/api/rentals/${event.id}/products`).then(res => {\n      console.log('Products for rental:', res.data);\n      setSelectedRental(event);\n      setEditRental({\n        project_number: event.title.split(':')[0],\n        product_ids: res.data.map(p => p.id),\n        start_date: moment(event.start).format('YYYY-MM-DD'),\n        end_date: moment(event.end).format('YYYY-MM-DD')\n      });\n    }).catch(err => {\n      console.error('Error fetching rental products:', err);\n      alert('Kunne ikke hente produkter for utleie: ' + err.message);\n    });\n  };\n  const handleEditRental = () => {\n    if (!selectedRental || !editRental.project_number || editRental.product_ids.length === 0) {\n      alert('Prosjektnummer og minst ett produkt kreves');\n      return;\n    }\n    console.log('Updating rental with id:', selectedRental.id);\n    axios.put(`http://localhost:5000/api/rentals/${selectedRental.id}`, editRental).then(() => {\n      console.log('Rental updated:', selectedRental.id);\n      fetchRentals();\n      updateStatistics();\n      setSelectedRental(null);\n    }).catch(err => {\n      var _err$response2, _err$response2$data;\n      console.error('Error updating rental:', err);\n      alert(((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.error) || 'Kunne ikke oppdatere utleie');\n    });\n  };\n  const handleDeleteRental = () => {\n    if (!selectedRental) return;\n    console.log('Attempting to delete rental with id:', selectedRental.id);\n    if (window.confirm('Er du sikker på at du vil slette denne utleien?')) {\n      axios.delete(`http://localhost:5000/api/rentals/${selectedRental.id}`).then(() => {\n        console.log('Rental deleted:', selectedRental.id);\n        fetchRentals();\n        updateStatistics();\n        setSelectedRental(null);\n      }).catch(err => {\n        var _err$response3, _err$response3$data;\n        console.error('Error deleting rental:', err);\n        alert('Kunde ikke slette utleie: ' + (((_err$response3 = err.response) === null || _err$response3 === void 0 ? void 0 : (_err$response3$data = _err$response3.data) === null || _err$response3$data === void 0 ? void 0 : _err$response3$data.error) || err.message));\n      });\n    }\n  };\n  const closeModal = () => {\n    setSelectedRental(null);\n  };\n  const closeAddModal = () => {\n    setShowAddModal(false);\n    setNewRental({\n      project_number: '',\n      product_ids: [],\n      start_date: '',\n      end_date: ''\n    });\n  };\n  const toggleProduct = (productId, isEdit = false) => {\n    const setRental = isEdit ? setEditRental : setNewRental;\n    const currentRental = isEdit ? editRental : newRental;\n    const productIds = currentRental.product_ids.includes(productId) ? currentRental.product_ids.filter(id => id !== productId) : [...currentRental.product_ids, productId];\n    setRental({\n      ...currentRental,\n      product_ids: productIds\n    });\n  };\n  const handleNavigate = newDate => {\n    console.log('Navigating to date:', newDate);\n    setCurrentDate(newDate);\n    updateStatistics();\n  };\n  const handleViewChange = view => {\n    console.log('Changing view to:', view);\n    setCurrentView(view);\n    updateStatistics();\n  };\n  const updateStatistics = () => {\n    axios.get('http://localhost:5000/api/rentals').then(res => {\n      const rentalsData = res.data;\n      let startDate, endDate;\n      switch (currentView) {\n        case 'year':\n          startDate = moment(currentDate).startOf('year');\n          endDate = moment(currentDate).endOf('year');\n          break;\n        case 'month':\n          startDate = moment(currentDate).startOf('month');\n          endDate = moment(currentDate).endOf('month');\n          break;\n        case 'week':\n          startDate = moment(currentDate).startOf('week');\n          endDate = moment(currentDate).endOf('week');\n          break;\n        case 'day':\n          startDate = moment(currentDate).startOf('day');\n          endDate = moment(currentDate).endOf('day');\n          break;\n        case 'agenda':\n          startDate = moment(currentDate).startOf('month');\n          endDate = moment(currentDate).endOf('month');\n          break;\n        default:\n          startDate = moment(currentDate).startOf('month');\n          endDate = moment(currentDate).endOf('month');\n      }\n      const stats = [];\n      let current = startDate.clone();\n      while (current.isSameOrBefore(endDate, 'day')) {\n        const dayRentals = rentalsData.filter(rental => {\n          const rentalStart = moment(rental.start_date);\n          const rentalEnd = moment(rental.end_date);\n          return current.isBetween(rentalStart, rentalEnd, 'day', '[]');\n        });\n        const productCount = dayRentals.reduce((count, rental) => {\n          const productNames = rental.product_names.split(',');\n          return count + productNames.length;\n        }, 0);\n        stats.push({\n          date: current.format('YYYY-MM-DD'),\n          productCount\n        });\n        current.add(1, 'day');\n      }\n      console.log('Statistics:', stats);\n      setStatistics(stats);\n    }).catch(err => {\n      console.error('Error fetching rentals for statistics:', err);\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"d-flex justify-content-between align-items-center mb-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Oversiktskalender\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 303,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"primary\",\n        onClick: () => setShowAddModal(true),\n        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fas fa-plus me-1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 305,\n          columnNumber: 11\n        }, this), \" Legg til utleie\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 304,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 302,\n      columnNumber: 7\n    }, this), rentals.length === 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-muted mb-4\",\n      children: \"Ingen utleie \\xE5 vise i kalenderen.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 308,\n      columnNumber: 32\n    }, this), /*#__PURE__*/_jsxDEV(Calendar, {\n      localizer: localizer,\n      events: rentals,\n      startAccessor: \"start\",\n      endAccessor: \"end\",\n      defaultView: \"month\",\n      views: {\n        month: 'month',\n        week: 'week',\n        day: 'day',\n        agenda: 'agenda',\n        year: YearView\n      },\n      date: currentDate,\n      onNavigate: handleNavigate,\n      onView: handleViewChange,\n      style: {\n        height: 600\n      },\n      onSelectEvent: handleSelectEvent,\n      messages: {\n        month: 'Måned',\n        week: 'Uke',\n        day: 'Dag',\n        agenda: 'Agenda',\n        year: 'År',\n        today: 'I dag',\n        previous: 'Forrige',\n        next: 'Neste'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 309,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Statistikk: Antall produkter utleid per dag\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 339,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Table, {\n        striped: true,\n        bordered: true,\n        hover: true,\n        responsive: true,\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Dato\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 343,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Antall produkter utleid\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 344,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 342,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 341,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: statistics.map(stat => /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: stat.date\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 350,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: stat.productCount\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 351,\n              columnNumber: 17\n            }, this)]\n          }, stat.date, true, {\n            fileName: _jsxFileName,\n            lineNumber: 349,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 347,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 340,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 338,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      show: !!selectedRental,\n      onHide: closeModal,\n      children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n        closeButton: true,\n        children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n          children: \"Rediger utleie\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 360,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 359,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n        children: /*#__PURE__*/_jsxDEV(Form, {\n          children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n            className: \"mb-3\",\n            controlId: \"editProjectNumber\",\n            children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n              children: \"Prosjektnummer\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 365,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n              type: \"text\",\n              value: editRental.project_number,\n              onChange: e => setEditRental({\n                ...editRental,\n                project_number: e.target.value\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 366,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 364,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n            className: \"mb-3\",\n            controlId: \"editProducts\",\n            children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n              children: \"Produkter\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 373,\n              columnNumber: 15\n            }, this), products.map(product => /*#__PURE__*/_jsxDEV(Form.Check, {\n              type: \"checkbox\",\n              label: product.name,\n              checked: editRental.product_ids.includes(product.id),\n              onChange: () => toggleProduct(product.id, true)\n            }, product.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 375,\n              columnNumber: 17\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 372,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n            className: \"mb-3\",\n            controlId: \"editStartDate\",\n            children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n              children: \"Startdato\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 385,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n              type: \"date\",\n              value: editRental.start_date,\n              onChange: e => setEditRental({\n                ...editRental,\n                start_date: e.target.value\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 386,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 384,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n            className: \"mb-3\",\n            controlId: \"editEndDate\",\n            children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n              children: \"Sluttdato\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 393,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n              type: \"date\",\n              value: editRental.end_date,\n              onChange: e => setEditRental({\n                ...editRental,\n                end_date: e.target.value\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 394,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 392,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 363,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 362,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Footer, {\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          variant: \"secondary\",\n          onClick: closeModal,\n          children: \"Avbryt\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 403,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"primary\",\n          onClick: handleEditRental,\n          children: \"Lagre endringer\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 406,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"danger\",\n          onClick: handleDeleteRental,\n          children: \"Slett utleie\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 409,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 402,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 358,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      show: showAddModal,\n      onHide: closeAddModal,\n      children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n        closeButton: true,\n        children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n          children: \"Legg til ny utleie\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 417,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 416,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n        children: /*#__PURE__*/_jsxDEV(Form, {\n          children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n            className: \"mb-3\",\n            controlId: \"newProjectNumber\",\n            children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n              children: \"Prosjektnummer\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 422,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n              type: \"text\",\n              placeholder: \"Prosjektnummer (f.eks. 102854)\",\n              value: newRental.project_number,\n              onChange: e => setNewRental({\n                ...newRental,\n                project_number: e.target.value\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 423,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 421,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n            className: \"mb-3\",\n            controlId: \"newProducts\",\n            children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n              children: \"Produkter\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 431,\n              columnNumber: 15\n            }, this), products.map(product => /*#__PURE__*/_jsxDEV(Form.Check, {\n              type: \"checkbox\",\n              label: product.name,\n              checked: newRental.product_ids.includes(product.id),\n              onChange: () => toggleProduct(product.id)\n            }, product.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 433,\n              columnNumber: 17\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 430,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n            className: \"mb-3\",\n            controlId: \"newStartDate\",\n            children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n              children: \"Startdato\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 443,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n              type: \"date\",\n              value: newRental.start_date,\n              onChange: e => setNewRental({\n                ...newRental,\n                start_date: e.target.value\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 444,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 442,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n            className: \"mb-3\",\n            controlId: \"newEndDate\",\n            children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n              children: \"Sluttdato\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 451,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n              type: \"date\",\n              value: newRental.end_date,\n              onChange: e => setNewRental({\n                ...newRental,\n                end_date: e.target.value\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 452,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 450,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 420,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 419,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Footer, {\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          variant: \"secondary\",\n          onClick: closeAddModal,\n          children: \"Avbryt\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 461,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"primary\",\n          onClick: addRental,\n          children: \"Lagre utleie\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 464,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 460,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 415,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 301,\n    columnNumber: 5\n  }, this);\n}\n_s(OverviewCalendar, \"ztZ/UcLvCuV6QnVPPfaFT/raORI=\");\n_c2 = OverviewCalendar;\nexport default OverviewCalendar;\nvar _c, _c2;\n$RefreshReg$(_c, \"YearView\");\n$RefreshReg$(_c2, \"OverviewCalendar\");","map":{"version":3,"names":["React","useEffect","useState","Calendar","momentLocalizer","moment","axios","Button","Modal","Form","Table","jsxDEV","_jsxDEV","localizer","YearView","date","events","months","Array","from","length","_","i","month","className","children","map","index","format","fileName","_jsxFileName","lineNumber","columnNumber","weekdaysShort","day","startOfMonth","clone","startOf","endOfMonth","endOf","startOfWeek","weeks","current","isSameOrBefore","weekDays","dayEvents","filter","event","start","isSame","push","title","id","add","_c","OverviewCalendar","_s","rentals","setRentals","products","setProducts","selectedRental","setSelectedRental","editRental","setEditRental","project_number","product_ids","start_date","end_date","newRental","setNewRental","showAddModal","setShowAddModal","currentDate","setCurrentDate","Date","currentView","setCurrentView","statistics","setStatistics","fetchRentals","fetchProducts","updateStatistics","get","then","res","console","log","data","formattedRentals","rental","end","isValid","toDate","valid","product_names","catch","err","error","alert","message","addRental","post","_err$response","_err$response$data","response","handleSelectEvent","split","p","handleEditRental","put","_err$response2","_err$response2$data","handleDeleteRental","window","confirm","delete","_err$response3","_err$response3$data","closeModal","closeAddModal","toggleProduct","productId","isEdit","setRental","currentRental","productIds","includes","handleNavigate","newDate","handleViewChange","view","rentalsData","startDate","endDate","stats","dayRentals","rentalStart","rentalEnd","isBetween","productCount","reduce","count","productNames","variant","onClick","startAccessor","endAccessor","defaultView","views","week","agenda","year","onNavigate","onView","style","height","onSelectEvent","messages","today","previous","next","striped","bordered","hover","responsive","stat","show","onHide","Header","closeButton","Title","Body","Group","controlId","Label","Control","type","value","onChange","e","target","product","Check","label","name","checked","Footer","placeholder","_c2","$RefreshReg$"],"sources":["/Users/kevin/Documents/develop/Web/RentalCal/client/src/pages/OverviewCalendar.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Calendar, momentLocalizer } from 'react-big-calendar';\nimport moment from 'moment';\nimport axios from 'axios';\nimport { Button, Modal, Form, Table } from 'react-bootstrap';\nimport 'react-big-calendar/lib/css/react-big-calendar.css';\n\nconst localizer = momentLocalizer(moment);\n\n// Egendefinert årsvisning (rendrer 12 måneder i et rutenett)\nconst YearView = ({ date, localizer, events }) => {\n  const months = Array.from({ length: 12 }, (_, i) => moment(date).month(i));\n  return (\n    <div className=\"rbc-year-view\">\n      <div className=\"rbc-year-grid\">\n        {months.map((month, index) => (\n          <div key={index} className=\"rbc-year-month\">\n            <h3>{month.format('MMMM YYYY')}</h3>\n            <div className=\"rbc-month-view\">\n              <div className=\"rbc-month-header\">\n                {moment.weekdaysShort().map((day, i) => (\n                  <div key={i} className=\"rbc-header\">{day}</div>\n                ))}\n              </div>\n              <div className=\"rbc-month-body\">\n                {(() => {\n                  const startOfMonth = month.clone().startOf('month');\n                  const endOfMonth = month.clone().endOf('month');\n                  const startOfWeek = startOfMonth.clone().startOf('week');\n                  const weeks = [];\n                  let current = startOfWeek.clone();\n                  while (current.isSameOrBefore(endOfMonth, 'day')) {\n                    const weekDays = [];\n                    for (let i = 0; i < 7; i++) {\n                      const dayEvents = events.filter(event =>\n                        moment(event.start).isSame(current, 'day')\n                      );\n                      weekDays.push(\n                        <div\n                          key={current.format('YYYY-MM-DD')}\n                          className={`rbc-day-bg ${current.isSame(moment(), 'day') ? 'rbc-today' : ''} ${!current.isSame(month, 'month') ? 'rbc-off-range' : ''}`}\n                        >\n                          <div className=\"rbc-date\">{current.date()}</div>\n                          {dayEvents.map(event => (\n                            <div key={event.id} className=\"rbc-event\">\n                              {event.title}\n                            </div>\n                          ))}\n                        </div>\n                      );\n                      current.add(1, 'day');\n                    }\n                    weeks.push(<div key={current.format('YYYY-WW')} className=\"rbc-month-row\">{weekDays}</div>);\n                  }\n                  return weeks;\n                })()}\n              </div>\n            </div>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n};\n\nfunction OverviewCalendar() {\n  const [rentals, setRentals] = useState([]);\n  const [products, setProducts] = useState([]);\n  const [selectedRental, setSelectedRental] = useState(null);\n  const [editRental, setEditRental] = useState({\n    project_number: '',\n    product_ids: [],\n    start_date: '',\n    end_date: '',\n  });\n  const [newRental, setNewRental] = useState({\n    project_number: '',\n    product_ids: [],\n    start_date: '',\n    end_date: '',\n  });\n  const [showAddModal, setShowAddModal] = useState(false);\n  const [currentDate, setCurrentDate] = useState(new Date('2025-05-23'));\n  const [currentView, setCurrentView] = useState('month');\n  const [statistics, setStatistics] = useState([]);\n\n  useEffect(() => {\n    fetchRentals();\n    fetchProducts();\n    updateStatistics();\n  }, [currentDate, currentView]);\n\n  const fetchRentals = () => {\n    axios\n      .get('http://localhost:5000/api/rentals')\n      .then((res) => {\n        console.log('All rentals:', res.data);\n        const formattedRentals = res.data.map((rental) => {\n          const start = moment(rental.start_date, 'YYYY-MM-DD', true);\n          const end = moment(rental.end_date, 'YYYY-MM-DD', true);\n          console.log(`Rental ${rental.id}:`, {\n            start: start.isValid() ? start.toDate() : null,\n            end: end.isValid() ? end.toDate() : null,\n            valid: start.isValid() && end.isValid(),\n          });\n          return {\n            id: rental.id,\n            title: `${rental.project_number}: ${rental.product_names}`,\n            start: start.isValid() ? start.toDate() : null,\n            end: end.isValid() ? end.toDate() : null,\n          };\n        }).filter(rental => rental.start && rental.end);\n        setRentals(formattedRentals);\n      })\n      .catch((err) => {\n        console.error('Error fetching rentals:', err);\n        alert('Kunne ikke hente utleie: ' + err.message);\n      });\n  };\n\n  const fetchProducts = () => {\n    axios\n      .get('http://localhost:5000/api/products')\n      .then((res) => {\n        console.log('Products fetched:', res.data);\n        setProducts(res.data);\n      })\n      .catch((err) => {\n        console.error('Error fetching products:', err);\n        alert('Kunne ikke hente produkter: ' + err.message);\n      });\n  };\n\n  const addRental = () => {\n    if (!newRental.project_number || newRental.product_ids.length === 0) {\n      alert('Prosjektnummer og minst ett produkt kreves');\n      return;\n    }\n    axios\n      .post('http://localhost:5000/api/rentals', newRental)\n      .then((res) => {\n        console.log('Rental added:', res.data);\n        fetchRentals();\n        updateStatistics();\n        setNewRental({ project_number: '', product_ids: [], start_date: '', end_date: '' });\n        setShowAddModal(false);\n      })\n      .catch((err) => {\n        console.error('Error adding rental:', err);\n        alert(err.response?.data?.error || 'Kunne ikke legge til utleie');\n      });\n  };\n\n  const handleSelectEvent = (event) => {\n    axios\n      .get(`http://localhost:5000/api/rentals/${event.id}/products`)\n      .then((res) => {\n        console.log('Products for rental:', res.data);\n        setSelectedRental(event);\n        setEditRental({\n          project_number: event.title.split(':')[0],\n          product_ids: res.data.map((p) => p.id),\n          start_date: moment(event.start).format('YYYY-MM-DD'),\n          end_date: moment(event.end).format('YYYY-MM-DD'),\n        });\n      })\n      .catch((err) => {\n        console.error('Error fetching rental products:', err);\n        alert('Kunne ikke hente produkter for utleie: ' + err.message);\n      });\n  };\n\n  const handleEditRental = () => {\n    if (!selectedRental || !editRental.project_number || editRental.product_ids.length === 0) {\n      alert('Prosjektnummer og minst ett produkt kreves');\n      return;\n    }\n    console.log('Updating rental with id:', selectedRental.id);\n    axios\n      .put(`http://localhost:5000/api/rentals/${selectedRental.id}`, editRental)\n      .then(() => {\n        console.log('Rental updated:', selectedRental.id);\n        fetchRentals();\n        updateStatistics();\n        setSelectedRental(null);\n      })\n      .catch((err) => {\n        console.error('Error updating rental:', err);\n        alert(err.response?.data?.error || 'Kunne ikke oppdatere utleie');\n      });\n  };\n\n  const handleDeleteRental = () => {\n    if (!selectedRental) return;\n    console.log('Attempting to delete rental with id:', selectedRental.id);\n    if (window.confirm('Er du sikker på at du vil slette denne utleien?')) {\n      axios\n        .delete(`http://localhost:5000/api/rentals/${selectedRental.id}`)\n        .then(() => {\n          console.log('Rental deleted:', selectedRental.id);\n          fetchRentals();\n          updateStatistics();\n          setSelectedRental(null);\n        })\n        .catch((err) => {\n          console.error('Error deleting rental:', err);\n          alert('Kunde ikke slette utleie: ' + (err.response?.data?.error || err.message));\n        });\n    }\n  };\n\n  const closeModal = () => {\n    setSelectedRental(null);\n  };\n\n  const closeAddModal = () => {\n    setShowAddModal(false);\n    setNewRental({ project_number: '', product_ids: [], start_date: '', end_date: '' });\n  };\n\n  const toggleProduct = (productId, isEdit = false) => {\n    const setRental = isEdit ? setEditRental : setNewRental;\n    const currentRental = isEdit ? editRental : newRental;\n    const productIds = currentRental.product_ids.includes(productId)\n      ? currentRental.product_ids.filter((id) => id !== productId)\n      : [...currentRental.product_ids, productId];\n    setRental({ ...currentRental, product_ids: productIds });\n  };\n\n  const handleNavigate = (newDate) => {\n    console.log('Navigating to date:', newDate);\n    setCurrentDate(newDate);\n    updateStatistics();\n  };\n\n  const handleViewChange = (view) => {\n    console.log('Changing view to:', view);\n    setCurrentView(view);\n    updateStatistics();\n  };\n\n  const updateStatistics = () => {\n    axios\n      .get('http://localhost:5000/api/rentals')\n      .then((res) => {\n        const rentalsData = res.data;\n        let startDate, endDate;\n        switch (currentView) {\n          case 'year':\n            startDate = moment(currentDate).startOf('year');\n            endDate = moment(currentDate).endOf('year');\n            break;\n          case 'month':\n            startDate = moment(currentDate).startOf('month');\n            endDate = moment(currentDate).endOf('month');\n            break;\n          case 'week':\n            startDate = moment(currentDate).startOf('week');\n            endDate = moment(currentDate).endOf('week');\n            break;\n          case 'day':\n            startDate = moment(currentDate).startOf('day');\n            endDate = moment(currentDate).endOf('day');\n            break;\n          case 'agenda':\n            startDate = moment(currentDate).startOf('month');\n            endDate = moment(currentDate).endOf('month');\n            break;\n          default:\n            startDate = moment(currentDate).startOf('month');\n            endDate = moment(currentDate).endOf('month');\n        }\n\n        const stats = [];\n        let current = startDate.clone();\n        while (current.isSameOrBefore(endDate, 'day')) {\n          const dayRentals = rentalsData.filter(rental => {\n            const rentalStart = moment(rental.start_date);\n            const rentalEnd = moment(rental.end_date);\n            return current.isBetween(rentalStart, rentalEnd, 'day', '[]');\n          });\n          const productCount = dayRentals.reduce((count, rental) => {\n            const productNames = rental.product_names.split(',');\n            return count + productNames.length;\n          }, 0);\n          stats.push({\n            date: current.format('YYYY-MM-DD'),\n            productCount,\n          });\n          current.add(1, 'day');\n        }\n        console.log('Statistics:', stats);\n        setStatistics(stats);\n      })\n      .catch((err) => {\n        console.error('Error fetching rentals for statistics:', err);\n      });\n  };\n\n  return (\n    <div>\n      <div className=\"d-flex justify-content-between align-items-center mb-4\">\n        <h2>Oversiktskalender</h2>\n        <Button variant=\"primary\" onClick={() => setShowAddModal(true)}>\n          <i className=\"fas fa-plus me-1\"></i> Legg til utleie\n        </Button>\n      </div>\n      {rentals.length === 0 && <p className=\"text-muted mb-4\">Ingen utleie å vise i kalenderen.</p>}\n      <Calendar\n        localizer={localizer}\n        events={rentals}\n        startAccessor=\"start\"\n        endAccessor=\"end\"\n        defaultView=\"month\"\n        views={{\n          month: 'month',\n          week: 'week',\n          day: 'day',\n          agenda: 'agenda',\n          year: YearView,\n        }}\n        date={currentDate}\n        onNavigate={handleNavigate}\n        onView={handleViewChange}\n        style={{ height: 600 }}\n        onSelectEvent={handleSelectEvent}\n        messages={{\n          month: 'Måned',\n          week: 'Uke',\n          day: 'Dag',\n          agenda: 'Agenda',\n          year: 'År',\n          today: 'I dag',\n          previous: 'Forrige',\n          next: 'Neste',\n        }}\n      />\n      <div className=\"mt-4\">\n        <h3>Statistikk: Antall produkter utleid per dag</h3>\n        <Table striped bordered hover responsive>\n          <thead>\n            <tr>\n              <th>Dato</th>\n              <th>Antall produkter utleid</th>\n            </tr>\n          </thead>\n          <tbody>\n            {statistics.map(stat => (\n              <tr key={stat.date}>\n                <td>{stat.date}</td>\n                <td>{stat.productCount}</td>\n              </tr>\n            ))}\n          </tbody>\n        </Table>\n      </div>\n      {/* Modal for redigering/sletting */}\n      <Modal show={!!selectedRental} onHide={closeModal}>\n        <Modal.Header closeButton>\n          <Modal.Title>Rediger utleie</Modal.Title>\n        </Modal.Header>\n        <Modal.Body>\n          <Form>\n            <Form.Group className=\"mb-3\" controlId=\"editProjectNumber\">\n              <Form.Label>Prosjektnummer</Form.Label>\n              <Form.Control\n                type=\"text\"\n                value={editRental.project_number}\n                onChange={(e) => setEditRental({ ...editRental, project_number: e.target.value })}\n              />\n            </Form.Group>\n            <Form.Group className=\"mb-3\" controlId=\"editProducts\">\n              <Form.Label>Produkter</Form.Label>\n              {products.map((product) => (\n                <Form.Check\n                  key={product.id}\n                  type=\"checkbox\"\n                  label={product.name}\n                  checked={editRental.product_ids.includes(product.id)}\n                  onChange={() => toggleProduct(product.id, true)}\n                />\n              ))}\n            </Form.Group>\n            <Form.Group className=\"mb-3\" controlId=\"editStartDate\">\n              <Form.Label>Startdato</Form.Label>\n              <Form.Control\n                type=\"date\"\n                value={editRental.start_date}\n                onChange={(e) => setEditRental({ ...editRental, start_date: e.target.value })}\n              />\n            </Form.Group>\n            <Form.Group className=\"mb-3\" controlId=\"editEndDate\">\n              <Form.Label>Sluttdato</Form.Label>\n              <Form.Control\n                type=\"date\"\n                value={editRental.end_date}\n                onChange={(e) => setEditRental({ ...editRental, end_date: e.target.value })}\n              />\n            </Form.Group>\n          </Form>\n        </Modal.Body>\n        <Modal.Footer>\n          <Button variant=\"secondary\" onClick={closeModal}>\n            Avbryt\n          </Button>\n          <Button variant=\"primary\" onClick={handleEditRental}>\n            Lagre endringer\n          </Button>\n          <Button variant=\"danger\" onClick={handleDeleteRental}>\n            Slett utleie\n          </Button>\n        </Modal.Footer>\n      </Modal>\n      {/* Modal for å legge til ny utleie */}\n      <Modal show={showAddModal} onHide={closeAddModal}>\n        <Modal.Header closeButton>\n          <Modal.Title>Legg til ny utleie</Modal.Title>\n        </Modal.Header>\n        <Modal.Body>\n          <Form>\n            <Form.Group className=\"mb-3\" controlId=\"newProjectNumber\">\n              <Form.Label>Prosjektnummer</Form.Label>\n              <Form.Control\n                type=\"text\"\n                placeholder=\"Prosjektnummer (f.eks. 102854)\"\n                value={newRental.project_number}\n                onChange={(e) => setNewRental({ ...newRental, project_number: e.target.value })}\n              />\n            </Form.Group>\n            <Form.Group className=\"mb-3\" controlId=\"newProducts\">\n              <Form.Label>Produkter</Form.Label>\n              {products.map((product) => (\n                <Form.Check\n                  key={product.id}\n                  type=\"checkbox\"\n                  label={product.name}\n                  checked={newRental.product_ids.includes(product.id)}\n                  onChange={() => toggleProduct(product.id)}\n                />\n              ))}\n            </Form.Group>\n            <Form.Group className=\"mb-3\" controlId=\"newStartDate\">\n              <Form.Label>Startdato</Form.Label>\n              <Form.Control\n                type=\"date\"\n                value={newRental.start_date}\n                onChange={(e) => setNewRental({ ...newRental, start_date: e.target.value })}\n              />\n            </Form.Group>\n            <Form.Group className=\"mb-3\" controlId=\"newEndDate\">\n              <Form.Label>Sluttdato</Form.Label>\n              <Form.Control\n                type=\"date\"\n                value={newRental.end_date}\n                onChange={(e) => setNewRental({ ...newRental, end_date: e.target.value })}\n              />\n            </Form.Group>\n          </Form>\n        </Modal.Body>\n        <Modal.Footer>\n          <Button variant=\"secondary\" onClick={closeAddModal}>\n            Avbryt\n          </Button>\n          <Button variant=\"primary\" onClick={addRental}>\n            Lagre utleie\n          </Button>\n        </Modal.Footer>\n      </Modal>\n    </div>\n  );\n}\n\nexport default OverviewCalendar;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}